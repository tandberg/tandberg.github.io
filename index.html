<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>tandberg.github.io</title>
		<link rel="stylesheet" href="style.css">

		<script src="vendor/lodash/dist/lodash.min.js"></script>
		<script src="vendor/d3/d3.min.js"></script>
	</head>
	<body>
		<div id="chart"></div>

		<script>
			(function(d3, _) {

				var canvas = d3.select('#chart').append('svg')
					.attr('height', 500)
					.attr('width', 500);


				var group = canvas.append('g')
					.attr('transform', 'translate(200, 200)');

				var r = 200;

				var start = -2.2;
				var end = Math.abs(start);

				var getValue = function(percent) {
					return start + ((end - start) * (percent / 100));
				};


				var doThings = function(percent) {

					var value = getValue(percent);

					var arc = d3.svg.arc()
						.innerRadius(r - 20)
						.outerRadius(r)
						.startAngle(start)
						.endAngle(value);

					var rest = d3.svg.arc()
						.innerRadius(r - 20)
						.outerRadius(r)
						.startAngle(value)
						.endAngle(end);

					group.append('path')
						.attr('d', arc)
						.attr('class', 'base');

					group.append('path')
						.attr('d', rest)
						.attr('class', 'rest');

					group.append('text')
						.text(percent + '%')
						.attr('font-size', '40pt')
						.attr('text-anchor', 'middle')
						.attr('fill', 'white')
						.attr('font-family', 'Helvetica Neue');

				};


				doThings(_.random(0, 100));

			})(d3, _);
		</script>
	</body>
</html>